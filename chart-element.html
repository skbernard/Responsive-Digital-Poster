<link rel="import" href="components/polymer/polymer.html">
<script src="components/chartsJS/chart.js"></script>
<script src="components/chartsJS/legend.js"></script>

<polymer-element name="chart-element" attributes="chartTitleBold chartTitle chartType chartData">
    <template>
        <style>
            :host {display: block; position: relative; background-color: #f9f9f9; width: 100%; padding: 05px 05px 05px 05px;}

            .chartTitle {color: grey; text-align: left; }
            .content    {padding: 05px 00px 05px 00px; align: center;}

        </style>

        <div class='chartTitle'><b>{{chartTitleBold}}</b> {{chartTitle}}</div>
        <div id="content" class="content"></div>
        <div id="legend"></div>

    </template>
    <script>
        Polymer('chart-element', {
            domReady: function () {

                Chart.defaults.global.responsive = true;

                var canvas = document.createElement('canvas');
                canvas.setAttribute("id","chart");

                this.$.content.appendChild(canvas);
                this.$.chart=canvas;

                var dataFigure1 = [
                    {label: "Pharma Company",   title: "PharmaCompany",  value: 48.6,   color: "#004b8d",   highlight: "#004b8d"},
                    {label: "Med Comms",        title: "MedComms",       value: 40.5,   color: "#f8991d",   highlight: "#f8991d"},
                    {label: "Other",            title: "Other",          value: 7.2,    color: "#a4b2d4",   highlight: "#a4b2d4"},
                    {label: "Publisher",        title: "Publisher",      value: 3.6,    color: "#c1c5c9",   highlight: "#c1c5c9"},
                    {label: "Device Company",   title: "DeviceCompany",  value: 1,      color: "#ffce90",   highlight: "#ffce90"}
                ];

                var dataFigure2a = [
                    {label: "Yes",          title: "Yes",           value: 30,    color: "#f8991d",   highlight: "#f8991d"},
                    {label: "No",           title: "No",            value: 60,    color: "#004b8d",   highlight: "#004b8d"},
                    {label: "Don't Know",   title: "Don't Know",    value: 10,    color: "#a4b2d4",   highlight: "#a4b2d4"}
                ];

                var dataFigure2b = [
                    {label: "Yes",          title: "Yes",           value: 50,    color: "#f8991d",   highlight: "#f8991d"},
                    {label: "No",           title: "No",            value: 37,    color: "#004b8d",   highlight: "#004b8d"},
                    {label: "Don't Know",   title: "Don't Know",    value: 13,    color: "#a4b2d4",   highlight: "#a4b2d4"}
                ];

                var dataFigure3 = [
                    {label: "Often",        title: "Often",         value: 6.3,     color: "#f8991d",   highlight: "#f8991d"},
                    {label: "Sometimes",    title: "Sometimes",     value: 36.9,    color: "#004b8d",   highlight: "#004b8d"},
                    {label: "Never",        title: "Never",         value: 56.8,    color: "#a4b2d4",   highlight: "#a4b2d4"},
                    {label: "Always",       title: "Always",        value: 0.5,     color: "#c1c5c9",   highlight: "#c1c5c9"}
                ];

                var dataFigure4 = {
                    labels : ["Increased Eengagement","Data Dissemination","Metric Tracking","A/V Interactivity"],
                    datasets : [
                        {
                            fillColor :      "#004b8d",
                            strokeColor :    "#004b8d",
                            highlightFill:   "#004b8d",
                            highlightStroke: "#004b8d",
                            data : [56, 43, 47, 62]
                        }]};

                var dataFigure5 = {
                    labels : ["Increased Resources","Increased Cost","Increased Timelines","Not Appropriate"],
                    datasets : [
                        {
                            fillColor :      "#004b8d",
                            strokeColor :    "#004b8d",
                            highlightFill:   "#004b8d",
                            highlightStroke: "#004b8d",
                            data : [80, 75, 56, 8]
                        }]};

                var dataFigure6 = [
                    {label: "Associated Costs",             title: "AssociatedCosts",       value: 33.6,    color: "#f8991d",   highlight: "#f8991d"},
                    {label: "Sponsor Company Policy",       title: "SponsorPolicy",         value: 9.3,     color: "#004b8d",   highlight: "#004b8d"},
                    {label: "Congress Regulations",         title: "CongressRegulations",   value: 27.1,    color: "#a4b2d4",   highlight: "#a4b2d4"},
                    {label: "Other",                        title: "Other",                 value: 11.5,    color: "#c1c5c9",   highlight: "#c1c5c9"},
                    {label: "Author Presenter Reluctance",  title: "AuthorReluctance",      value: 12.1,    color: "#fcd5a7",   highlight: "#fcd5a7"},
                    {label: "Technology Barriers",          title: "TechnologyBarrier",     value: 8.4,     color: "#fceddc",   highlight: "#fceddc"}
                ];

                var dataFigure7 = [
                    {label: "Congresses will not allow digital posters to replace printed posters", title: "NotAllow",          value: 33.6,    color: "#f8991d",   highlight: "#f8991d"},
                    {label: "Congresses will slowly integrate digital poster presentations",        title: "SlowlyIntegrate",   value: 9.3,     color: "#004b8d",   highlight: "#004b8d"},
                    {label: "Congresses will move toward all digital poster presentations ",        title: "AllDigital",        value: 27.1,    color: "#a4b2d4",   highlight: "#a4b2d4"},
                    {label: "Don't Know",                                                           title: "Don'tKnow",         value: 11.5,    color: "#c1c5c9",   highlight: "#c1c5c9"},
                    {label: "Other",                                                                title: "Other",             value: 12.1,    color: "#fcd5a7",   highlight: "#fcd5a7"}
                ];


                if(this.chartType=="Pie" || this.chartType=="pie") {new Chart(this.$.chart.getContext('2d')).Pie(eval(this.chartData)); legend(this.$.legend, eval(this.chartData));} else
                if(this.chartType=="Bar" || this.chartType=="bar") {new Chart(this.$.chart.getContext('2d')).Bar(eval(this.chartData))}




//                new Chart(this.$.chart.getContext('2d')).Pie(eval(this.chartData))

            }
       });
    </script>
</polymer-element>